!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Jsonic=e()}}((function(){var e,n,t,r=e={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{t="function"==typeof clearTimeout?clearTimeout:o}catch(e){t=o}}();var u,l=[],c=!1,a=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):a=-1,l.length&&f())}function f(){if(!c){var e=s(d);c=!0;for(var n=l.length;n;){for(u=l,l=[];++a<n;)u&&u[a].run();a=-1,n=l.length}u=null,c=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===o||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(n){try{return t.call(null,e)}catch(n){return t.call(this,e)}}}(e)}}function p(e,n){this.fun=e,this.array=n}function E(){}r.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];l.push(new p(e,n)),1!==l.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=E,r.addListener=E,r.once=E,r.off=E,r.removeListener=E,r.removeAllListeners=E,r.emit=E,r.prependListener=E,r.prependOnceListener=E,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var h={};return function(e){(function(){"use strict";function e(e){return"string"==typeof e?i(t(e)):e}Object.defineProperty(h,"__esModule",{value:!0}),h.Jsonic=void 0;const n=String.fromCharCode("0x0000");function t(e){let i={kind:0,index:0,len:0,row:0,col:0,value:null},o=0,s=e.length,u=0,l=0;function c(e,n,r){return i.kind=t.BAD,i.index=n,i.col=l,i.len=n-o+1,i.value=r,i.why=e,i}return function(){i.len=0,i.value=null,i.row=u;let a,d=0,f=[],p=-1,E=-1,h=-1;for(;o<s;){let k=e[o];switch(k){case" ":case"\t":for(i.kind=t.SPACE,i.index=o,i.col=l++,d=o+1;t.spaces[e[d++]];)l++;return d--,i.len=d-o,i.value=e.substring(o,d),o=d,i;case"\n":case"\r":for(i.kind=t.LINE,i.index=o,i.col=l,d=o+1,l=0,u++;t.lines[e[d++]];)u++;return d--,i.len=d-o,i.value=e.substring(o,d),o=d,i;case"{":return i.kind=t.OPEN_BRACE,i.index=o,i.col=l++,i.len=1,o++,i;case"}":return i.kind=t.CLOSE_BRACE,i.index=o,i.col=l++,i.len=1,o++,i;case"[":return i.kind=t.OPEN_SQUARE,i.index=o,i.col=l++,i.len=1,o++,i;case"]":return i.kind=t.CLOSE_SQUARE,i.index=o,i.col=l++,i.len=1,o++,i;case":":return i.kind=t.COLON,i.index=o,i.col=l++,i.len=1,o++,i;case",":return i.kind=t.COMMA,i.index=o,i.col=l++,i.len=1,o++,i;case"t":if(i.kind=t.TRUE,i.index=o,i.col=l,d=o,"rue"===e.substring(d+1,d+4)&&t.ender[e[d+4]])i.value=!0,i.len=4,d+=4;else{for(;!t.ender[e[++d]];);i.kind=t.TEXT,i.len=d-o,i.value=e.substring(o,d)}return o=l=d,i;case"f":if(i.kind=t.FALSE,i.index=o,i.col=l,d=o,"alse"===e.substring(d+1,d+5)&&t.ender[e[d+5]])i.value=!1,i.len=5,d+=5;else{for(;!t.ender[e[++d]];);i.kind=t.TEXT,i.len=d-o,i.value=e.substring(o,d)}return o=l=d,i;case"n":if(i.kind=t.NULL,i.index=o,i.col=l,d=o,"ull"===e.substring(d+1,d+4)&&t.ender[e[d+4]])i.value=null,i.len=4,d+=4;else{for(;!t.ender[e[++d]];);i.kind=t.TEXT,i.len=d-o,i.value=e.substring(o,d)}return o=l=d,i;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i.kind=t.NUMBER,i.index=o,i.col=l++,d=o;t.digital[e[++d]];);if(t.ender[e[d]]&&(i.len=d-o,i.value=+e.substring(o,d),isNaN(i.value)&&(i.value=+e.substring(o,d).replace(/_/g,"")),isNaN(i.value)&&(i.value=null,d--)),null==i.value){for(;!t.ender[e[++d]];);i.kind=t.TEXT,i.len=d-o,i.value=e.substring(o,d)}return o=l=d,i;case'"':case"'":for(i.kind=t.STRING,i.index=o,i.col=l++,E=k.charCodeAt(0),f=[],p=-1,d=o+1;d<s;d++){if(l++,(p=e.charCodeAt(d))<32)return c("unprintable",d,e.charAt(d));if(E===p){d++;break}if(92===p)switch(h=e.charCodeAt(++d),l++,h){case 110:case 116:case 114:case 98:case 102:f.push(r[h]);break;case 117:if(d++,a=String.fromCharCode("0x"+e.substring(d,d+4)),n===a)return c("invalid-unicode",d,e.substring(d-2,d+4));f.push(a),d+=3,l+=4;break;default:f.push(e[d])}else{let n=d;do{p=e.charCodeAt(++d),l++}while(32<=p&&E!==p);l--,f.push(e.substring(n,d)),d--}}return E!==p?(l=o,c("unterminated",d-1,f.join(""))):(i.value=f.join(""),i.len=d-o,o=d,i);default:for(i.index=o,i.col=l,d=o;!t.ender[e[++d]];);return i.kind=t.TEXT,i.len=d-o,i.value=e.substring(o,d),o=l=d,i}}return i.kind=t.END,i.index=s,i.col=l,i}}let r=new Array(116);function i(e){let n=void 0,r=!0,i=[],l={tI:0,po:void 0,pk:-1,tstk:[],nstk:[],res:void 0};for(;r;){i[l.tI]=i[l.tI]||{...e()};let c,a,d=i[l.tI],f=d.kind;if(t.SPACE===f){l.tI++;continue}if(t.LINE===f){l.tI++;continue}if(t.END===f){l.po&&!l.po.push&&(l.res=o(l)),r=!1;break}if(t.BAD===f){(n=new Error(d.why)).token=d,r=!1;break}if(t.OPEN_BRACE===f){s(f,l),l.pk=f;continue}if(t.OPEN_SQUARE===f){s(f,l),l.pk=f;continue}if(t.CLOSE_BRACE===f){u(l),l.pk=f;continue}if(t.CLOSE_SQUARE===f){u(l),l.pk=f;continue}let p=1;do{i[l.tI+p]=i[l.tI+p]||{...e()},a=(c=i[l.tI+p]).kind,p++}while(a==t.SPACE||a==t.LINE);t.COLON!==a?t.COMMA!==f?(t.NULL===f?l.res=null:t.TRUE===f?l.res=!0:t.FALSE===f?l.res=!1:(t.NUMBER===f||t.STRING===f||t.TEXT===f)&&(l.res=d.value),l.pk=f,l.tI++,l.res=o(l)):(null==l.po?(l.po=[],l.res=void 0===l.res?null:l.res,l.po.push(l.res),l.res=l.po):!l.po.push||t.COMMA!==l.pk&&t.OPEN_SQUARE!==l.pk||l.po.push(null),l.tI++,l.pk=f):(d.key=!0,l.tstk.push(d),l.tI+=p,l.pk=f)}return n||l.res}function o(e){if(e.po&&e.po.push)e.po.push(e.res);else{let n=e.tstk.pop();n&&n.key&&(e.po=e.po||e.nstk.pop()||{},e.po[n.value]=e.res)}return e.po||e.res}function s(e,n){n.po&&n.nstk.push(n.po),n.po=t.OPEN_BRACE===e?{}:[],n.tI++}function u(e){return e.res=e.po,e.po=e.nstk.pop(),e.tI++,o(e),e.res}r[98]="\b",r[102]="\f",r[110]="\n",r[114]="\r",r[116]="\t",t.ender={":":!0,",":!0,"]":!0,"}":!0," ":!0,"\t":!0,"\n":!0,"\r":!0,undefined:!0},t.digital={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,".":!0,_:!0,x:!0,e:!0,E:!0,a:!0,A:!0,b:!0,B:!0,c:!0,C:!0,d:!0,D:!0,f:!0,F:!0,"+":!0,"-":!0},t.spaces={" ":!0,"\t":!0},t.lines={"\n":!0,"\r":!0},t.escapes=r,t.BAD=10,t.END=20,t.SPACE=100,t.LINE=200,t.OPEN_BRACE=1e3,t.CLOSE_BRACE=2e3,t.OPEN_SQUARE=3e3,t.CLOSE_SQUARE=4e3,t.COLON=5e3,t.COMMA=6e3,t.NUMBER=1e4,t.STRING=2e4,t.TEXT=3e4,t.TRUE=1e5,t.FALSE=2e5,t.NULL=3e5;let l=Object.assign(e,{use:function(n){n(e)},parse:n=>e(n),lexer:t,process:i});h.Jsonic=l}).call(this)}.call(this,e),h}));