!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Jsonic=e()}}((function(){var e={};Object.defineProperty(e,"__esModule",{value:!0}),e.make=e.util=e.RuleSpec=e.Rule=e.Parser=e.Lexer=e.JsonicError=e.Jsonic=void 0;const t="object",n="string",r="function",s="unexpected",l="map",o="list",i="elem",c="pair",a="val",u="node";class p extends SyntaxError{constructor(e,t,n,r,s){t=k.deep({},t);let l=k.deep({},{rI:s.rI,opts:s.opts,config:s.config,meta:s.meta,src:()=>s.src(),root:()=>s.root(),plugins:()=>s.plugins(),node:s.node,t0:s.t0,t1:s.t1,tI:s.tI,next:()=>s.next(),log:s.log,use:s.use}),o=p.make_desc(e,t,n,r,l);super(o.message),Object.assign(this,o),this.stack&&(this.stack=this.stack.split("\n").filter(e=>!e.includes("jsonic/jsonic")).map(e=>e.replace(/    at /,"at ")).join("\n"))}static make_desc(e,t,n,s,l){n={...n};let o=l.opts,i=l.meta,c=k.errinject(o.error[e]||o.error.unknown,e,t,n,s,l);r===typeof o.hint&&(o.hint={...o.hint(),...o.hint});let a=["[31m[jsonic/"+e+"]:[0m "+(i&&i.mode?"[35m[mode:"+i.mode+"]:[0m ":"")+c,"  [34m--\x3e[0m "+(i.fileName||"<no-file>")+":"+n.row+":"+n.col,k.extract(l.src(),c,n),k.errinject((o.hint[e]||o.hint.unknown).split("\n").map((e,t)=>(0===t?" ":"  ")+e).join("\n"),e,t,n,s,l),"  [2mhttps://jsonic.richardrodger.com[0m","  [2m--internal: rule="+s.name+"~"+h[s.state]+"; token="+l.config.token[n.pin]+"; plugins="+l.plugins().map(e=>e.name).join(",")+"--[0m\n"].join("\n"),u={internal:{token:n,ctx:l}};return{...Object.create(u),message:a,code:e,details:t,meta:i,fileName:i.fileName,lineNumber:n.row,columnNumber:n.col}}toJSON(){return{...this,__error:!0,name:this.name,message:this.message,stack:this.stack}}}e.JsonicError=p;class d{constructor(e){this.match={},this.match[k.token("@LTP",e)]=[],this.match[k.token("@LTX",e)]=[],this.match[k.token("@LCS",e)]=[],this.match[k.token("@LML",e)]=[],this.end={pin:k.token("#ZZ",e),loc:0,len:0,row:0,col:0,val:void 0,src:void 0}}start(e){const t=e.opts,n=e.config;let r=e=>k.token(e,n),s=e=>k.token(e,n),l=e.F,o=r("@LTP"),i=r("@LTX"),c=r("@LCS"),a=r("@LML"),u=r("#ZZ"),p=r("#SP"),d=r("#CM"),h=r("#NR"),m=r("#ST"),f=r("#TX"),g=r("#VL");r("#LN");let b={pin:u,loc:0,row:0,col:0,len:0,val:void 0,src:void 0},v=0,_=0,x=0,y=e.src(),w=y.length,C=null!=e&&null!=e.log?(...t)=>e.log("lex",...t):void 0,S=this;function j(t,n,r,s){return S.bad(e,C,t,b,v,n,_,x,r,r,s)}function N(t,n){let r=S.match[t];if(null!=r){b.loc=v;for(let t of r){let r=t(v,y,b,e,n,j);if(r)return v=r.sI,_=r.rD?_+r.rD:_,x=r.cD?x+r.cD:x,C&&C(s(b.pin),l(b.src),{...b}),b}}}let A=function(e){b.len=0,b.val=void 0,b.src=void 0,b.row=_;let r=o,k=null,S="",A=0,I=[],L=-1;e:for(;v<w;){let u=y[v],O=y.charCodeAt(v);if(o!==r){if(i===r){if(N(i,e))return b;let r=t.text.hoover?n.hoover_ender:n.text_ender;for(;null!=y[A]&&(!r.includes(y[A])||n.cmk0.includes(y[A])&&!n.cmk1.includes(y[A+1]));)x++,A++;if(b.len=A-v,b.pin=f,b.val=y.substring(v,A),b.src=b.val,t.text.hoover&&n.multi.SP.includes(b.val[b.val.length-1])){let e=b.val.length-2;for(;0<e&&n.multi.SP.includes(b.val[e]);)e--;b.val=b.val.substring(0,e+1),b.src=b.val,x-=b.len-e-1,b.len=b.val.length,v+=b.len}else v=A;return C&&C(s(b.pin),l(b.src),{...b}),b}if(c===r){if(N(c,e))return b;for(A=v;A<w&&!S.includes(y[A]);)A++,x++;return b.val+=y.substring(v,A),b.src=b.val,b.len=b.val.length,v=A,r=o,C&&C(s(b.pin),l(b.src),{...b}),b}if(a===r){if(N(a,e))return b;A=v;let i=1,c=k[0],u=k[1],p=t.balance[k[2]],d=!!k[3],h="",m=c.length,f=u.length;if(d){let e=v-1;for(;-1<e&&n.multi.SP.includes(y[e--]););h=n.multi.SP[0].repeat(v-e-2)}for(A+=c.length;A<w&&0<i;)u[0]===y[A]&&u===y.substring(A,A+f)?(A+=f,x+=f,i--):p&&c[0]===y[A]&&c===y.substring(A,A+m)?(A+=m,x+=f,i++):(t.char.row===y[A]?(_++,x=0):x++,A++);return b.val=y.substring(v,A),b.src=b.val,b.len=b.val.length,d&&(b.val=b.val.substring(m,b.val.length-f),b.val=b.val.replace(new RegExp(t.char.row+h,"g"),"\n"),b.val=b.val.substring(1,b.val.length-1)),v=A,r=o,C&&C(s(b.pin),l(b.src),{...b}),b}}else{if(N(o,e))return b;if(n.start.SP.includes(O)){for(b.pin=p,b.loc=v,b.col=x++,A=v+1;n.multi.SP.includes(y[A]);)x++,A++;return b.len=A-v,b.val=y.substring(v,A),b.src=b.val,v=A,C&&C(s(b.pin),l(b.src),{...b}),b}if(n.start.LN.includes(O)){for(b.pin=n.lex.core.LN,b.loc=v,b.col=x,A=v,x=0;n.multi.LN.includes(y[A]);)_+=t.char.row===y[A]?1:0,A++;return b.len=A-v,b.val=y.substring(v,A),b.src=b.val,v=A,C&&C(s(b.pin),l(b.src),{...b}),b}if(null!=n.single[O])return b.pin=n.single[O],b.loc=v,b.col=x++,b.len=1,b.src=u,v++,C&&C(s(b.pin),l(b.src),{...b}),b;if(n.start.NR.includes(O)){for(b.pin=h,b.loc=v,b.col=x,A=v;t.number.digital.includes(y[++A]););if((null==y[A]||n.value_ender.includes(y[A]))&&(b.len=A-v,1<b.len&&"0"===y[v]&&"x"!=y[v+1]?(b.val=void 0,A--):(b.val=+y.substring(v,A),t.number.underscore&&isNaN(b.val)&&(b.val=+y.substring(v,A).replace(/_/g,"")),isNaN(b.val)&&(b.val=void 0,A--))),null!=b.val)return b.src=y.substring(v,A),x+=b.len,v=A,C&&C(s(b.pin),l(b.src),{...b}),b}if(n.start_bm.includes(O)){let e=y.substring(v,v+n.bmk_maxlen);for(let s of n.bmk)if(e.startsWith(s)){b.pin=m,b.loc=v,b.col=x,r=a,k=[s,t.string.block[s],null,!0];continue e}}if(n.start.ST.includes(O)){b.pin=m,b.loc=v,b.col=x++;let e=u.charCodeAt(0),r=t.string.multiline.includes(u);for(I=[],L=-1,A=v+1;A<w;A++)if(x++,e===(L=y.charCodeAt(A))){if(!t.string.escapedouble||e!==y.charCodeAt(A+1)){A++;break}I.push(y[A]),A++}else if(92===L){let e=y.charCodeAt(++A);x++;let r=n.escape[e];if(null!=r)I.push(r);else if(117===e){A++;let e=String.fromCharCode("0x"+y.substring(A,A+4));if(t.char.bad_unicode===e)return j("invalid_unicode",A,y.substring(A-2,A+4));I.push(e),A+=3,x+=4}else I.push(y[A])}else if(L<32){if(!r||!n.start.LN.includes(L))return j("unprintable",A,"char-code="+y[A].charCodeAt(0));I.push(y[A])}else{let t=A;do{L=y.charCodeAt(++A),x++}while(32<=L&&e!==L&&92!==L);x--,I.push(y.substring(t,A)),A--}return e!==L?(x=v,j("unterminated",A-1,I.join(""))):(b.val=I.join(""),b.src=y.substring(v,A),b.len=A-v,v=A,C&&C(s(b.pin),l(b.src),{...b}),b)}if(n.start_cm.includes(O)){let e=n.cm_single.includes(u),s=y.substring(v,v+n.cmk_maxlen);for(let l of n.cmk)if(s.startsWith(l)){if(!0!==t.comment[l]){b.pin=d,b.loc=v,b.col=x,b.val="",r=a,k=[l,t.comment[l],"comment"];continue e}e=!0;break}if(e){b.pin=d,b.loc=v,b.col=x,b.val="",r=c,S=n.multi.LN;continue e}}b.loc=v,b.col=x,A=v;do{x++,A++}while(null!=y[A]&&!n.value_ender.includes(y[A]));let f=y.substring(v,A),T=t.value[f];if(void 0!==T)return b.pin=g,b.val=T,b.src=f,b.len=A-v,v=A,C&&C(s(b.pin),l(b.src),{...b}),b;r=i}}return b.pin=u,b.loc=w,b.col=x,C&&C(s(b.pin),l(b.src),{...b}),b};return A.src=y,A}bad(e,t,n,r,s,l,o,i,c,a,u){return r.why=n,r.pin=k.token("#BD",e.config),r.loc=l,r.row=o,r.col=i,r.len=l-s+1,r.val=c,r.src=a,r.use=u,t&&t(k.token(r.pin,e.config),e.F(r.src),{...r},"error",n),r}lex(e,t){if(null==e&&null==t)return this.match;if(null==this.match[e])throw new Error("jsonic: unknown lex state:"+e);return null!=t&&this.match[e].push(t),this.match[e]}clone(e){let t=new d(e);return k.deep(t.match,this.match),t}}var h;e.Lexer=d,function(e){e[e.open=0]="open",e[e.close=1]="close"}(h||(h={}));class m{constructor(e,t,n){this.id=t.rI++,this.name=e.name,this.spec=e,this.node=n,this.state=h.open,this.child=f,this.open=[],this.close=[]}process(e){let t=f;return h.open===this.state?t=this.spec.open(this,e):h.close===this.state&&(t=this.spec.close(this,e)),t}}e.Rule=m;let f={id:0,spec:{name:"norule"}};class g{constructor(e,t){this.name=e,this.def=t}open(e,t){let n,r=e,l="",o=t.F;this.def.before_open&&(n=this.def.before_open.call(this,e,t),e.node=n&&n.node||e.node);let i=null!=n&&n.done?{m:[]}:this.parse_alts(this.def.open,e,t);if(i.e)throw new p(s,{open:!0},i.e,e,t);return e.open=i.m,i.p?(t.rs.push(e),(r=e.child=new m(t.rsm[i.p],t,e.node)).parent=e,l+="U"):i.r?((r=new m(t.rsm[i.r],t,e.node)).parent=e.parent,l+="R"):l+="Z",this.def.after_open&&this.def.after_open.call(this,e,t,r),t.log&&t.log(u,e.name+"/"+e.id,h[e.state],l,o(e.node)),e.state=h.close,r}close(e,t){let n=f,r="";this.def.before_close&&this.def.before_close.call(this,e,t);let l=0<this.def.close.length?this.parse_alts(this.def.close,e,t):{};if(l.e)throw new p(s,{close:!0},l.e,e,t);return l.h&&(n=l.h(this,e,t)||n,r+="H"),l.p?(t.rs.push(e),(n=e.child=new m(t.rsm[l.p],t,e.node)).parent=e,r+="U"):l.r?((n=new m(t.rsm[l.r],t,e.node)).parent=e.parent,r+="R"):(n=t.rs.pop()||f,r+="O"),this.def.after_close&&this.def.after_close.call(this,e,t,n),n.why=r,t.log&&t.log(u,e.name+"/"+e.id,h[e.state],r,t.F(e.node)),n}parse_alts(e,t,n){let r,s=void 0,l=0,o=n.config.token;if(o.ZZ===n.t0.pin)s={m:[]};else if(0<e.length){for(l=0;l<e.length;l++)if(!(r=e[l]).c||r.c(r,t,n)){if(null==r.s||0===r.s.length){s={...r,m:[]};break}if(r.s[0]===n.t0.pin){if(1===r.s.length){s={...r,m:[n.t0]};break}if(r.s[1]===n.t1.pin){s={...r,m:[n.t0,n.t1]};break}}else if(o.AA===r.s[0]){s={...r,m:[n.t0]};break}}s=s||{e:n.t0,m:[]}}if(s=s||{m:[]},n.log&&n.log("parse",t.name+"/"+t.id,h[t.state],l<e.length?"alt="+l:"no-alt",l<e.length&&r&&r.s?"["+r.s.map(e=>o[e]).join(" ")+"]":"[]",n.tI,"p="+(s.p||""),"r="+(s.r||""),"b="+(s.b||""),s.m.map(e=>o[e.pin]).join(" "),n.F(s.m.map(e=>e.src)),s),s.m){let e=0,t=s.m.length-(s.b||0);for(;e++<t;)n.next()}return s}}e.RuleSpec=g;class b{constructor(e,t){this.rsm={},this.opts=e,this.config=t}init(){let e=this.config.token,t=e.OB,n=e.CB,r=e.OS,s=e.CS,u=e.CL,p=e.CA,d=e.TX,h=e.NR,m=e.ST,f=e.VL,b=e.AA,v={val:{open:[{s:[t,p],p:l},{s:[t],p:l},{s:[r],p:o},{s:[p],p:o,b:1},{s:[d,u],p:l,b:2},{s:[m,u],p:l,b:2},{s:[h,u],p:l,b:2},{s:[f,u],p:l,b:2},{s:[d]},{s:[h]},{s:[m]},{s:[f]}],close:[{s:[p],c:(e,t,n)=>0===n.rs.length,r:i,h:(e,t,n)=>{t.node=[t.node]}},{s:[b],b:1}],before_close:e=>{var t,n;e.node=null!==(t=e.child.node)&&void 0!==t?t:null===(n=e.open[0])||void 0===n?void 0:n.val}},map:{before_open:()=>({node:{}}),open:[{s:[n]},{p:c}],close:[]},list:{before_open:()=>({node:[]}),open:[{s:[s]},{p:i}],close:[]},pair:{open:[{s:[m,u],p:a},{s:[d,u],p:a},{s:[h,u],p:a},{s:[f,u],p:a},{s:[n],b:1}],close:[{s:[n]},{s:[p],r:c},{s:[m,u],r:c,b:2},{s:[d,u],r:c,b:2},{s:[h,u],r:c,b:2},{s:[f,u],r:c,b:2}],before_close:(e,t)=>{let r=e.open[0];if(r&&n!==r.pin){let n=m===r.pin?r.val:r.src,s=e.node[n];e.node[n]=null==s?e.child.node:t.opts.object.extend?k.deep(s,e.child.node):e.child.node}}},elem:{open:[{s:[t],p:l},{s:[r],p:o},{s:[d]},{s:[h]},{s:[m]},{s:[f]},{s:[p,p],b:2},{s:[p]}],close:[{s:[p,s]},{s:[p],r:i},{s:[s]},{s:[t],p:l},{s:[r],p:o},{s:[d,u],p:l,b:2},{s:[h,u],p:l,b:2},{s:[m,u],p:l,b:2},{s:[f,u],p:l,b:2},{s:[d],r:i,b:1},{s:[h],r:i,b:1},{s:[m],r:i,b:1},{s:[f],r:i,b:1}],after_open:(e,t,n)=>{if(e===n&&e.open[0]){let t=e.open[0].val;e.node.push(null!=t?t:null)}},before_close:e=>{e.child.node&&e.node.push(e.child.node)}}};this.rsm=Object.keys(v).reduce((e,t)=>(e[t]=new g(t,v[t]),e),{})}rule(e,t){return this.rsm[e]=null==t?this.rsm[e]:t(this.rsm[e],this.rsm)||this.rsm[e],this.rsm[e]}start(e,t,n,r,s){let l,o=this.opts,i=this.config,c={rI:1,opts:o,config:i,meta:r||{},src:()=>t,root:()=>l.node,plugins:()=>n.internal().plugins,node:void 0,u2:e.end,u1:e.end,t0:e.end,t1:e.end,tI:-2,next:g,rs:[],rsm:this.rsm,log:r&&r.log||void 0,F:k.make_src_format(i),use:{}};null!=s&&(c=k.deep(c,s)),k.make_log(c);let a=e=>k.token(e,this.config),u=k.wrap_bad_lex(e.start(c),k.token("#BD",this.config),c),p=new m(this.rsm.val,c);l=p;let d=2*Object.keys(this.rsm).length*u.src.length*2*o.rule.maxmul;function g(e=!0){let t;c.u2=c.u1,c.u1=c.t0,c.t0=c.t1;do{t=u(p),c.tI++}while(e&&i.tokenset.IGNORE.includes(t.pin));return c.t1={...t},c.t0}g(),g();let b=0;for(;f!==p&&b<d;)c.log&&c.log("rule",p.name+"/"+p.id,h[p.state],c.rs.length,c.tI,"["+a(c.t0.pin)+" "+a(c.t1.pin)+"]","["+c.F(c.t0.src)+" "+c.F(c.t1.src)+"]",p,c),p=p.process(c),c.log&&c.log("stack",c.rs.length,c.rs.map(e=>e.name+"/"+e.id).join(";"),p,c),b++;return l.node}clone(e,t){let n=new b(e,t);return n.rsm=Object.keys(this.rsm).reduce((e,t)=>(e[t]=k.clone(this.rsm[t]),e),{}),n}}e.Parser=b;let k={token:function(e,t,r){let s=t.token,l=s[e];return null==l&&n===typeof e&&(l=t.tokenI++,s[l]=e,s[e]=l,s[e.substring(1)]=l,null!=r&&Object.assign(r.token,t.token)),l},deep:function(e,...n){let s=r===typeof e,l=null!=e&&(t===typeof e||s);for(let o of n){let n=r===typeof o,i=null!=o&&(t===typeof o||n);if(l&&i&&!n&&Array.isArray(e)===Array.isArray(o))for(let t in o)e[t]=k.deep(e[t],o[t]);else e=void 0===o?e:n?o:i?k.deep(Array.isArray(o)?[]:{},o):o,s=r===typeof e,l=null!=e&&(t===typeof e||s)}return e},clone:function(e){return k.deep(Object.create(Object.getPrototypeOf(e)),e)},s2cca:function(e){return e.split("").map(e=>e.charCodeAt(0))},longest:e=>e.reduce((e,t)=>e<t.length?t.length:e,0),make_src_format:e=>(t,n)=>null==t?"":(n=JSON.stringify(t)).substring(0,e.debug.maxlen)+(e.debug.maxlen<n.length?"...":""),make_log:e=>{if("number"==typeof e.log){let n=!1,r=e.log;-1===r&&(r=1,n=!0),e.log=(...s)=>{if(n){let n=s.filter(e=>t!=typeof e).join("\t");e.opts.debug.get_console().log(n)}else e.opts.debug.get_console().dir(s,{depth:r})}}},wrap_bad_lex:(e,t,n)=>{let r=r=>{let l=e(r);if(t===l.pin){let e={};throw null!=l.use&&(e.use=l.use),new p(l.why||s,e,l,r,n)}return l};return r.src=e.src,r},errinject:(e,t,n,r,s,l)=>e.replace(/\$([\w_]+)/g,(e,o)=>JSON.stringify("code"===o?t:n[o]||l.meta[o]||r[o]||s[o]||l[o]||l.opts[o]||l.config[o]||"$"+o)),extract:(e,t,n)=>{let r=0<n.loc?n.loc:0,s=0<n.row?n.row:0,l=0<n.col?n.col:0,o=null==n.src?"":n.src,i=e.substring(Math.max(0,r-333),r).split("\n"),c=e.substring(r,r+333).split("\n"),a=2+(""+(s+2)).length,u=s<2?0:s-2,p=e=>"[34m"+(""+u++).padStart(a," ")+" | [0m"+(null==e?"":e),d=i.length;return[2<d?p(i[d-3]):null,1<d?p(i[d-2]):null,p(i[d-1]+c[0])," ".repeat(a)+"   "+" ".repeat(l)+"[31m"+"^".repeat(o.length||1)+" "+t+"[0m",p(c[1]),p(c[2])].filter(e=>null!=e).join("\n")},handle_meta_mode:(e,t,n)=>{let s=e.options;if(r!==typeof s.mode[n.mode])return[!1];try{return s.mode[n.mode].call(e,t,n)}catch(l){if("SyntaxError"===l.name){let r=0,o=0,i=0,c="",a=l.message.match(/^Unexpected token (.) .*position\s+(\d+)/i);if(a){c=a[1],r=parseInt(a[2]),o=t.substring(0,r).replace(/[^\n]/g,"").length;let e=r-1;for(;-1<e&&"\n"!==t.charAt(e);)e--;i=e<r?t.substring(e,r).length-1:0}let u=l.token||{pin:e.token.UK,loc:r,len:c.length,row:l.lineNumber||o,col:l.columnNumber||i,val:void 0,src:c};throw new p(l.code||"json",l.details||{msg:l.message},u,{},l.ctx||{rI:-1,opts:s,config:{token:{}},token:{},meta:n,src:()=>t,root:()=>{},plugins:()=>[],node:void 0,u2:u,u1:u,t0:u,t1:u,tI:-1,rs:[],next:()=>u,rsm:{},log:n.log,F:k.make_src_format(e.internal().config),use:{}})}throw l}},build_config_from_options:function(e,t){let r=Object.keys(t.token);r.forEach(t=>k.token(t,e));let s=r.filter(e=>null!=t.token[e].c);e.single=s.reduce((n,r)=>{return n[(s=t.token[r].c,s.charCodeAt(0))]=e.token[r],n;var s},[]);let l=r.filter(e=>n===typeof t.token[e]);e.start=l.reduce((e,n)=>(e[n.substring(1)]=k.s2cca(t.token[n]),e),{}),e.multi=l.reduce((e,n)=>(e[n.substring(1)]=t.token[n],e),{});let o=r.filter(e=>null!=t.token[e].s);if(e.tokenset=o.reduce((n,r)=>(n[r.substring(1)]=t.token[r].s.split(",").map(t=>e.token[t]),n),{}),t.escape=t.escape||{},e.escape=Object.keys(t.escape).reduce((e,n)=>(e[n.charCodeAt(0)]=t.escape[n],e),[]),e.start_cm=[],e.cm_single="",e.cmk=[],e.cmk0="",e.cmk1="",t.comment){let n=Object.keys(t.comment);n.forEach(t=>{1===t.length?(e.start_cm.push(t.charCodeAt(0)),e.cm_single+=t):(e.start_cm.push(t.charCodeAt(0)),e.cmk.push(t),e.cmk0+=t[0],e.cmk1+=t[1])}),e.cmk_maxlen=k.longest(n)}e.start_cm_char=e.start_cm.map(e=>String.fromCharCode(e)).join(""),e.start_bm=[],e.bmk=[];let i=Object.keys(t.string.block);i.forEach(t=>{e.start_bm.push(t.charCodeAt(0)),e.bmk.push(t)}),e.bmk_maxlen=k.longest(i),e.single_char=e.single.map((e,t)=>String.fromCharCode(t)).join(""),e.value_ender=e.multi.SP+e.multi.LN+e.single_char+e.start_cm_char,e.text_ender=e.value_ender,e.hoover_ender=e.multi.LN+e.single_char+e.start_cm_char,e.lex={core:{LN:k.token(t.lex.core.LN,e)}},e.debug=t.debug}};function v(e,s){let l,o,i,c,a=e;r===typeof e&&(a={},s=e);let u=k.deep({},s?{...s.options}:{escape:{b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},char:{row:"\n",bad_unicode:String.fromCharCode("0x0000")},comment:{"#":!0,"//":!0,"/*":"*/"},balance:{comment:!0},number:{digital:"-1023456789._xeEaAbBcCdDfF+",underscore:!0},string:{multiline:"`",block:{"'''":"'''"},escapedouble:!1},text:{hoover:!0,endofline:!1},object:{extend:!0},value:{null:null,true:!0,false:!1},mode:{},plugin:{},debug:{get_console:()=>console,maxlen:33},error:{unknown:"unknown error: $code",unexpected:"unexpected character(s): $src",invalid_unicode:"invalid unicode escape: $src",unprintable:"unprintable character: $src",unterminated:"unterminated string: $src"},hint:_,token:{"#OB":{c:"{"},"#CB":{c:"}"},"#OS":{c:"["},"#CS":{c:"]"},"#CL":{c:":"},"#CA":{c:","},"#SP":" \t","#LN":"\n\r","#CM":!0,"#NR":"-0123456789","#ST":"\"'`","#TX":!0,"#VL":!0,"#BD":!0,"#ZZ":!0,"#UK":!0,"#AA":!0,"#IGNORE":{s:"#SP,#LN,#CM"}},lex:{core:{LN:"#LN"}},rule:{maxmul:3}},a),p=function(e,t,r){if(n===typeof e){let n=p.internal(),[s,l]=null!=t&&null!=t.mode?k.handle_meta_mode(p,e,t):[!1];return s||(l=n.parser.start(n.lexer,e,p,t,r)),l}return e};if(p.token=function(e){return k.token(e,i,p)},s){for(let t in s)p[t]=s[t];p.parent=s;let e=s.internal();i=k.deep({},e.config),k.build_config_from_options(i,u),Object.assign(p.token,i.token),c=[...e.plugins],l=e.lexer.clone(i),o=e.parser.clone(u,i)}else i={tokenI:1,token:{}},k.build_config_from_options(i,u),c=[],l=new d(i),(o=new b(u,i)).init();return Object.assign(p.token,i.token),p.internal=()=>({lexer:l,parser:o,config:i,plugins:c}),p.options=k.deep(e=>{if(null!=e&&t===typeof e){k.build_config_from_options(i,k.deep(u,e));for(let e in u)p.options[e]=u[e]}return p},u),p.parse=p,p.use=function(e,t){return p.options({plugin:{[e.name]:t||{}}}),p.internal().plugins.push(e),e(p)||p},p.rule=function(e,t){let n=p.internal().parser.rule(e,t);return null==t?n:p},p.lex=function(e,t){let n=p.internal().lexer.lex(e,t);return null==t?n:p},p.make=function(e){return v(e,p)},Object.defineProperty(p.make,"name",{value:"make"}),p}function _(e=((e,t="replace")=>e[t](/[A-Z]/g,e=>" "+e.toLowerCase())[t](/[~%][a-z]/g,e=>("~"==e[0]?" ":"")+e[1].toUpperCase())),t="~sinceTheErrorIsUnknown,ThisIsProbablyABugInsideJsonic\nitself.~pleaseConsiderPostingAGithubIssue -Thanks!|~theCharacter(s) $srcShouldNotOccurAtThisPointAsItIsNot\nvalid %j%s%o%nSyntax,EvenUnderTheRelaxedJsonicRules.~ifItIs\nnotObviouslyWrong,TheActualSyntaxErrorMayBeElsewhere.~try\ncommentingOutLargerAreasAroundThisPointUntilYouGetNoErrors,\nthenRemoveTheCommentsInSmallSectionsUntilYouFindThe\noffendingSyntax.~n%o%t%e:~alsoCheckIfAnyPluginsOrModesYouAre\nusingExpectDifferentSyntaxInThisCase.|~theEscapeSequence $srcDoesNotEncodeAValidUnicodeCodePoint\nnumber.~youMayNeedToValidateYourStringDataManuallyUsingTest\ncodeToSeeHow~javaScriptWillInterpretIt.~alsoConsiderThatYour\ndataMayHaveBecomeCorrupted,OrTheEscapeSequenceHasNotBeen\ngeneratedCorrectly.|~stringValuesCannotContainUnprintableCharacters (characterCodes\nbelow 32).~theCharacter $srcIsUnprintable.~youMayNeedToRemove\ntheseCharactersFromYourSourceData.~alsoCheckThatItHasNot\nbecomeCorrupted.|~stringValuesCannotBeMissingTheirFinalQuoteCharacter,Which\nshouldMatchTheirInitialQuoteCharacter.".split("|")){return"unknown|unexpected|invalid_unicode|unprintable|unterminated".split("|").reduce((n,r,s)=>(n[r]=e(t[s]),n),{})}e.util=k,e.make=v;let x=v();return e.Jsonic=x,e}));